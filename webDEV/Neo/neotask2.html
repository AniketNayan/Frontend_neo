
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag and Drop Items "NeoMarche"</title>
    <link rel="stylesheet" href="/Neo/styletask.css">
</head>
<body>
<div class="container">
    <!-- Left Box -->
    <div id="left">
        <div class="list" draggable="true">
            <img src="/Neo/img 3.jpg" alt="">
            <span class="item-name">CAP</span>
        </div>
        <div class="list" draggable="true">
            <img src="/Neo/img1.jpg" alt="tshirt">
            <span class="item-name">T-shirt</span>
        </div>
        <div class="list" draggable="true">
            <img src="/Neo/img2.jpg" alt="tshirt">
            <span class="item-name">T-shirt</span>
        </div>
        <div class="list" draggable="true">
            <img src="/Neo/img4.jpg" alt="cap">
            <span class="item-name">CAP</span>
        </div>
    </div>
    
    <!-- Right Box -->
    <div id="right"></div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    let leftBox = document.getElementById("left");
    let rightBox = document.getElementById("right");

    function createDraggableItem(originalItem) {
        let clonedItem = originalItem.cloneNode(true);
        clonedItem.setAttribute("draggable", "true");
        clonedItem.dataset.id = "clone-" + Math.random().toString(36).substr(2, 9); // Unique ID

        // Add drag events for the cloned item
        clonedItem.addEventListener("dragstart", (e) => {
            e.dataTransfer.setData("text/plain", clonedItem.dataset.id);
            e.dataTransfer.setData("isNew", "false"); // Mark as an existing item
        });

        return clonedItem;
    }

    // Make original items draggable
    document.querySelectorAll("#left .list").forEach((item, index) => {
        item.dataset.id = "item-" + index; // Unique ID for each item
        item.addEventListener("dragstart", (e) => {
            e.dataTransfer.setData("text/plain", item.dataset.id);
            e.dataTransfer.setData("isNew", "true"); // Mark as new
        });
    });

    function handleDrop(e, targetBox) {
        e.preventDefault();
        let itemId = e.dataTransfer.getData("text/plain");
        let isNew = e.dataTransfer.getData("isNew");

        if (isNew === "true") {
            // Clone a new item from left to right
            let originalItem = document.querySelector(`[data-id='${itemId}']`);
            if (originalItem) {
                let newItem = createDraggableItem(originalItem);
                targetBox.appendChild(newItem);
            }
        } else {
            // Move existing item back to left
            let draggedElement = document.querySelector(`[data-id='${itemId}']`);
            if (draggedElement && draggedElement.parentElement === rightBox) {
                draggedElement.remove(); // Remove from right when dragged back to left
            }
        }
    }

    // Allow items to be dropped into both left and right boxes
    rightBox.addEventListener("dragover", (e) => e.preventDefault());
    rightBox.addEventListener("drop", (e) => handleDrop(e, rightBox));

    leftBox.addEventListener("dragover", (e) => e.preventDefault());
    leftBox.addEventListener("drop", (e) => handleDrop(e, leftBox));
});

</script>

</body>
</html>
